{# 
  This page grabs project data from _data/docs/projects.yml. It looks up each
  project by its url (for example, it looks for /docs/extensions) and uses the
  project's own frontmatter to render the project title and summary.
#}

{% extends 'layouts/base.njk' %}

{% block title_bar %}
  {% include 'partials/breadcrumbs.njk' %}
{% endblock %}

{% block content %}
  <div class="pad-400 stack">
    {% for key, value in i18n.projects -%}
      <h2 class="type--eyebrow">{{ i18n.projects[key].heading }}</h2>
      <ul class="project-grid pad-0" role="list">
        {% for item in docs.projects[key] -%}
          {# Find the landing page for the project itself and grab its metadata #}
          {% set projectUrl = helpers.join(page.url, item.url) %}
          {% set project = helpers.findByUrl(collections.all, projectUrl) %}
          {% set pd = project.data %}
          <li class="text-align-center">
            <a class="project-grid__link" href="{{ pd.project_key }}">
              {% from 'macros/project-icon.njk' import projectIcon with context %}
              {{ projectIcon(pd.project_icon_color, pd.project_key) }}
              <h3 class="type--h5 gap-top-400">{{ pd.project_name }}</h1>
              {# TODO(samthor): We should probably limit this text. #}
              <p class="display-none lg:display-block type--small gap-top-300">{{ pd.description }}</p>
            </a>
          </li>
        {%- endfor %}
      </ul>
    {%- endfor %}
  </div>
{% endblock %}